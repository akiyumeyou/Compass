#!/usr/bin/env sh

echo "📝 Gitへのpush前にシステム仕様書を生成しています..."

# システム仕様書を生成
npm run generate-spec

# 生成されたファイルをgitに追加
git add docs/system-specs/

# 変更がある場合はコミット
if ! git diff --cached --quiet docs/system-specs/; then
  echo "📚 システム仕様書を更新しています..."
  git commit -m "docs: システム仕様書を自動更新 [skip ci]"
fi

echo "✅ システム仕様書の生成が完了しました"